<?php
declare(strict_types=1);

namespace {namespace};

use Psr\Http\Message\ResponseFactoryInterface;
use Psr\Http\Message\ResponseInterface;
use Psr\Http\Message\ServerRequestInterface;
use Psr\Http\Message\StreamFactoryInterface;
use TYPO3\CMS\Extbase\Mvc\Controller\ActionController;

use {domainObject.prefix}\Model\{domainObject.modelClassname};
use {domainObject.prefix}\Repository\{domainObject.repositoryClassname};

class {name} extends ActionController
{
    /** @var ResponseFactoryInterface */
    protected $responseFactory;

    /** @var StreamFactoryInterface */
    protected $streamFactory;

    /** @var {domainObject.repositoryClassname} */
    protected ${domainObject.repositoryVariable};

    public function __construct(
        ResponseFactoryInterface $responseFactory,
        StreamFactoryInterface $streamFactory,
        {domainObject.repositoryClassname} ${domainObject.repositoryVariable}
    )
    {
        $this->responseFactory = $responseFactory;
        $this->streamFactory = $streamFactory;
        $this->{domainObject.repositoryVariable} = ${domainObject.repositoryVariable};
    }
    <f:for each="{actions}" as="action">
    /** <f:format.raw>{action.name}</f:format.raw>
    *
    */
    public function <f:format.raw>{action.name}</f:format.raw>Action(ServerRequestInterface $request): ResponseInterface
    {
        <f:if condition="{action.name} == 'index'">
            $objects = $this->{domainObject.repositoryVariable}->findAll();
            $this->view->assign('objects', $objects);
        </f:if>
        // Do awesome stuff

        if (Context::IsHeadless()) {
            return $this->jsonResponse($this->responseFactory->createResponse());
        } else {
            return $this->responseFactory->createResponse()->withBody(
                $this->streamFactory->createStream('Response content from {{NAME}} with route path: ' . $request->getAttribute('route')->getPath())
            );
        }
    }
    </f:for>
}
